<!DOCTYPE html>

<html lang="cs">
<head>
<style>
  .version-tag {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #00ffc3;
    color: #000;
    font-weight: bold;
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 0.9em;
    z-index: 9999;
    box-shadow: 0 0 8px rgba(0,255,195,0.6);
  }



#locationInfoBox {
  font-size: 1.05em;
  border: 1px solid #00ffc3;
  box-shadow: 0 0 8px rgba(0,255,195,0.2);
  padding: 16px;
  background: rgba(0, 255, 195, 0.03);
}

#locationInfoBox strong {
  color: #00ffc3;
  font-size: 1.2em;
}

#info-name {
  font-size: 1.2em;
  color: #e0e0e0;
  font-weight: bold;
  text-shadow: 0 0 3px #00ffc3;
}

#info-gps {
  font-size: 1.1em;
  color: #bbbbbb;
}
</style>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Astronomick√° p≈ôedpovƒõƒè</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&amp;display=swap" rel="stylesheet"/>
<style>
    :root {
      --primary: #4b3f72;
      --secondary: #2e8b57;
      --background-dark: #0b0c10;
      --panel-bg: #1f2833;
      --border-color: #3e5363;
      --text-color: #dcdcdc;
    }

    
body {
  font-family: 'Orbitron', sans-serif;
  background: linear-gradient(to bottom, #0b0c1a, #1b2c3a);
  background-size: 400% 400%;
  animation: gradientShift 60s ease infinite;
  color: var(--text-color);
  padding: 20px;
  margin: 0;
  position: relative;
  overflow-x: hidden;
}
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
    

  #cityDisplay {
    font-size: 1.2em;
    color: #00ffc3;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid #3e5363;
    border-radius: 10px;
    padding: 10px 20px;
    display: inline-block;
    margin: 10px auto;
    text-shadow: 0 0 5px #00ffc3;
  }

    .starry-bg {
      position: fixed;
      width: 100%;
      height: 100%;
      background: transparent;
      z-index: -1;
      pointer-events: none;
    }

    .starry-bg::before {
      content: '';
      position: absolute;
      top: -100%;
      left: 0;
      width: 100%;
      height: 300%;
      background: transparent;
      box-shadow:
        10px 20px white,
        50px 80px #888,
        90px 150px white,
        200px 300px #aaa,
        300px 50px #777,
        400px 500px white,
        600px 200px #999,
        800px 100px white,
        1000px 400px #666,
        1200px 250px white;
      animation: stars-fall 60s linear infinite;
      opacity: 0.5;
    }

    @keyframes stars-fall {
      0% { transform: translateY(0); }
      100% { transform: translateY(100%); }
    }

    h1, h2 {
      text-align: center;
      color: #ffffff;
    }

    .controls {
      text-align: center;
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 5px;
      flex-wrap: wrap;
    }

    .input-wrapper {
      position: relative;
      display: inline-block;
    }

    #cityInput {
      padding: 10px 35px 10px 10px;
      width: 300px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      background-color: #121212;
      color: var(--text-color);
    }

    .clear-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 14px;
      cursor: pointer;
      color: #ccc;
      display: none;
      line-height: 1;
    }

    .controls button {
  transition: all 0.3s ease;
  box-shadow: 0 0 8px rgba(0, 255, 195, 0.3);
      padding: 10px;
      border-radius: 8px;
      border: none;
      background: var(--primary);
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }

    .controls button:hover {
      background: var(--secondary);
    }

    #suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      background: #121212;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      width: 100%;
      list-style: none;
      padding: 0;
      margin-top: 5px;
      z-index: 1000;
      display: none;
      box-shadow: 0 2px 5px rgba(0,0,0,0.7);
    }

    #suggestions li {
      padding: 10px;
      cursor: pointer;
    }

    #suggestions li:hover {
      background-color: var(--primary);
      color: white;
    }

    .layout {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: flex-start;
    }

    .map-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  width: 30%;
  min-width: 200px;
}

    #map {
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: 10px;
}

    .info-container {
      flex: 1 1 55%;
    }

    .moon-phase {
      background: var(--panel-bg);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.6);
    }

    .moon-phase img {
      width: 100%;
      border-radius: 8px;
      margin-top: 10px;
    }

    .forecast-day {
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
      border-radius: 10px;
      background: var(--panel-bg);
    }

    .forecast-day h3 {
      margin: 0;
      padding: 10px;
      cursor: pointer;
      background: var(--primary);
      color: white;
      border-radius: 10px 10px 0 0;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 10px;
    }

    .forecast-content {
      display: none;
      padding: 10px;
      height: auto; overflow: visible; }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 8px;
      border: 1px solid #333;
      text-align: center;
    }

    .spinner {
      display: none;
      margin: 0 auto;
      border: 8px solid #333;
      border-top: 8px solid var(--primary);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      100% { transform: rotate(360deg); }
    }
  
    .forecast-scroll {
      display: flex;
      overflow-x: auto;
      gap: 10px;
      padding: 10px 0;
    }

    .forecast-card {
      min-width: 70px;
      font-size: 0.8em;
      background: #2c2f33;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 6px;
      text-align: center;
      flex-shrink: 0;
    }

    .forecast-card span {
      display: block;
      margin-bottom: 5px;
    }

    .layout {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      height: 90vh;
      align-items: stretch;
    }

    .info-container {
      width: 70%;
      display: flex;
      flex-direction: column;
    }

    .map-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  width: 30%;
  min-width: 200px;
}

    #map {
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: 10px;
}

    #locationInfoBox {
      position: sticky;
      top: 0;
      background: var(--panel-bg);
      z-index: 10;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 10px;
    }


    .layout {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      align-items: flex-start;
    }

    .info-container {
      flex: 1 1 60%;
      display: flex;
      flex-direction: column;
    }

    .map-container {
      flex: 1 1 40%;
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }

    .map-section-item {
      width: 100%;
      aspect-ratio: 1 / 1;
      border-radius: 10px;
      overflow: hidden;
    }

    .map-section-item iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    
  h1 {
    margin: 10px 0 5px 0;
    font-size: 1.8em;
  }
  .controls {
    margin-bottom: 10px;
  }
  body {
    padding: 10px;
  }

  #cityInput {
    padding: 6px 30px 6px 8px;
    width: 240px;
  }
  .controls button {
  transition: all 0.3s ease;
  box-shadow: 0 0 8px rgba(0, 255, 195, 0.3);
    padding: 6px 10px;
    font-size: 0.9em;
  }

  
body {
  font-family: 'Orbitron', sans-serif;
  background: linear-gradient(to bottom, #0b0c1a, #1b2c3a);
  background-size: 400% 400%;
  animation: gradientShift 60s ease infinite;
  color: var(--text-color);
  padding: 20px;
  margin: 0;
  position: relative;
  overflow-x: hidden;
}
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
    
  @keyframes bg-fade {
    0% { background: radial-gradient(ellipse at bottom, #1b2c45 0%, #0d0f1a 100%); }
    100% { background: radial-gradient(ellipse at bottom, #223b5f 0%, #151826 100%); }
  }

  .input-wrapper {
    box-shadow: 0 0 10px rgba(0,255,195,0.4);
    border-radius: 10px;
    background: rgba(0, 255, 195, 0.05);
    padding: 5px;
  }
  #cityInput {
    font-size: 1em;
    font-weight: bold;
    border: 2px solid #00ffc3;
    background-color: #111;
    color: #00ffc3;
    transition: box-shadow 0.3s ease;
  }
  #cityInput:focus {
    outline: none;
    box-shadow: 0 0 12px #00ffc3;
  }
</style>
</head>
<body>
<div class="version-tag">Verze 0.1</div>
<div class="starry-bg"></div>
<h1 style="font-size:2.2em; text-shadow: 0 0 15px #00ffc3;">ü™ê Astronomick√° p≈ôedpovƒõƒè</h1>
<div class="controls">
<div class="input-wrapper">
<input id="cityInput" oninput="autocompleteCities(); document.querySelector('.clear-btn').style.display = this.value ? 'block' : 'none';" placeholder="Zadejte mƒõsto..." type="text"/>
<button class="clear-btn" onclick="document.getElementById('cityInput').value=''; this.style.display='none'; document.getElementById('suggestions').style.display='none';">√ó</button>
<ul id="suggestions"></ul>
</div>
<h2 id="cityDisplay" style="display:none; text-align:center; font-size: 1.5em; color:#00ffc3; text-shadow: 0 0 5px #00ffc3;"></h2>
<button onclick="getLocation()">üìç Moje poloha</button>
</div>
<div class="layout">
<!-- Lev√Ω sloupec: Info + p≈ôedpovƒõƒè -->
<div class="info-container">
<div class="moon-phase" id="locationInfoBox">
<strong><u><span style="font-size: 1.2em;">üìç Informace o m√≠stƒõ</span></u></strong>
<div><strong>üåÜ N√°zev:</strong> <span id="info-name">-</span></div>
<div><strong>üåê GPS:</strong> <span id="info-gps">-</span></div>
<div style="margin-top: 8px;">
<a href="#" id="bortle-link" style="color:#00ffc3; font-weight:bold; text-decoration:underline;" target="_blank">
    üåå Zobrazit Bortleovu t≈ô√≠du
  </a>
<div id="moon-phase-display" style="margin-top: 8px; font-size: 1.05em;">
<strong>üåô F√°ze Mƒõs√≠ce:</strong> <span id="moon-phase-label">‚Äî</span>
</div>
<div class="moon-phase" id="planet-box" style="margin-top: 20px;">
<h3 style="margin-bottom: 8px;">üî≠ Viditeln√© planety dnes veƒçer</h3>
<div id="planet-log" style="font-size: 0.9em; color:#ccc;"></div>
<table style="width: 100%; margin-top: 8px; font-size: 0.9em; border: 1px solid #444;">
<thead><tr><th>Planeta</th><th>V√Ω≈°ka (¬∞)</th><th>Azimut (¬∞)</th></tr></thead>
<tbody id="planet-table"><tr><td colspan="3">Zat√≠m nejsou viditeln√© ≈æ√°dn√© planety nad horizontem (po 22:00).</td></tr></tbody>
</table>
</div>
</div>
</div>
<div class="spinner" id="spinner"></div>
<div id="forecast"></div>
</div>
<!-- Prav√Ω sloupec: Mapa -->
<div class="map-container">
<div class="map-section-item" id="windyWrapper" style="width: 100%; margin-top: 10px; display: none; position: relative;">
<div id="windyOverlayBlocker" style="position:absolute;top:0;left:0;right:0;bottom:0;z-index:2;"></div>
<iframe frameborder="0" id="windyFrame" src="https://embed.windy.com/embed2.html?lat=50.08&amp;lon=14.43&amp;zoom=11&amp;level=surface&amp;overlay=satellite&amp;menu=&amp;message=&amp;marker=&amp;calendar=now&amp;type=satellite&amp;location=coordinates&amp;detail=&amp;metricWind=default&amp;metricTemp=default" style="border-radius: 10px; display: block; position:relative; z-index:1;" width="100%">
</iframe>
</div>

</div>
</div>





<script>
function waitForAstronomy(callback) {
  if (typeof Astronomy !== "undefined") {
    callback();
  } else {
    setTimeout(() => waitForAstronomy(callback), 100);
  }
}

// Rebind planetary and moon calls to wait for library
const originalFetchPlanets = window.fetchPlanets;
window.fetchPlanets = function(lat, lon) {
  waitForAstronomy(() => originalFetchPlanets(lat, lon));
};

const originalFetchMoonPhase = window.fetchMoonPhase;
window.fetchMoonPhase = function(lat, lon) {
  waitForAstronomy(() => originalFetchMoonPhase(lat, lon));
};
</script></body>
</html>
<style>
.controls button:hover {
  box-shadow: 0 0 12px rgba(0, 255, 195, 0.6);
}
</style>
